{% from "partial/icon.html" import icon %}
<!DOCTYPE html>
<html lang="en">
  <head>
    {% include "partial/meta.html" %}
    <link rel="stylesheet" href="{{ url_for('static', path='css/contact_form.css') }}">
  </head>
  <body>
    <main class="main-wrapper">
      <a href="/" class="back-link">{{ icon("arrow_back", size="16") }}Back to Home</a>
      <div class="post-body">
        {{ contact | safe }}
        
        {% if success_message %}
          <div class="message success-message">
            <p>{{ success_message }}</p>
          </div>
        {% endif %}
        
        {% if error_message %}
          <div class="message error-message">
            <p>{{ error_message }}</p>
          </div>
        {% endif %}
        
        {% if show_form %}
          <p>Or use the contact form...</p>
          <form action="/contact" method="post" class="contact-form">
            <fieldset>
              <label for="name">Name<span aria-hidden="true">*</span></label>
              <input id="name" name="name" type="text" required autocomplete="name" 
                     value="{{ form_data.name if form_data else '' }}">

              <label for="email">Email<span aria-hidden="true">*</span></label>
              <input id="email" name="email" type="email" required autocomplete="email"
                     value="{{ form_data.email if form_data else '' }}">

              <label for="topic">Topic</label>
              <select id="topic" name="topic">
                <option value="" {% if not form_data or form_data.topic == '' %}selected{% endif %}>General question</option>
                <option value="collab" {% if form_data and form_data.topic == 'collab' %}selected{% endif %}>Project collaboration</option>
                <option value="tech" {% if form_data and form_data.topic == 'tech' %}selected{% endif %}>Technical discussion</option>
              </select>

              <label for="message">Message<span aria-hidden="true">*</span></label>
              <textarea id="message" name="message" rows="6" required>{{ form_data.message if form_data else '' }}</textarea>

              <button type="submit">Send</button>
            </fieldset>
          </form>
        {% endif %}
      </div>
      {% include "partial/theme_switch.html" %}
    </main>
  </body>
</html>
